{"ast":null,"code":"var _jsxFileName = \"/Users/sid/sahib/oc/restaurant-review-app/src/Components/AppContainer/index.js\";\nimport React from \"react\";\nimport { Map, GoogleApiWrapper } from \"google-maps-react\";\nimport AppContainer from \"./AppContainer\";\nexport default class Container extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.addRestaurants = toAddRestaurants => {\n      const restaurants = this.state.restaurants;\n      this.setState({\n        restaurants: [...restaurants, ...toAddRestaurants]\n      });\n    };\n\n    this.addReviews = (restaurantId, reviews) => {\n      this.setState({\n        reviews: [...this.state.reviews, {\n          [restaurantId]: reviews\n        }]\n      });\n    };\n\n    this.allRestaurantsLoaded = (google, map) => {\n      // SAHIB: Once all restaurants are loaded, we shall get reviews for them (call AllPlaces functinon)\n      const restaurants = this.state.restaurants;\n      const placeIds = restaurants.map(res => {\n        return res.place_id;\n      });\n      this.allPlaces(google, map, placeIds);\n    };\n\n    this.allPlaces = (google, map, placeIds) => {\n      const addReviews = this.addReviews;\n      placeIds.map((Id, i) => {\n        setTimeout(() => {\n          const request = {\n            placeId: \"\".concat(Id),\n            fields: [\"name\", \"place_id\", \"rating\", \"reviews\", \"formatted_address\"]\n          };\n          const service = new google.maps.places.PlacesService(map);\n          service.getDetails(request, getInfo);\n\n          function getInfo(results, status) {\n            if (status === \"OK\") {\n              addReviews(Id, results);\n            }\n          }\n        }, 2500);\n        return Id;\n      });\n    };\n\n    this.state = {\n      restaurants: [],\n      reviews: []\n    };\n  }\n\n  render() {\n    const _this$props = this.props,\n          lat = _this$props.lat,\n          lng = _this$props.lng;\n    const _this$state = this.state,\n          restaurants = _this$state.restaurants,\n          reviews = _this$state.reviews;\n    console.log('restaurants, reviews', restaurants, reviews);\n    return React.createElement(AppContainer, {\n      lat: lat,\n      lng: lng,\n      addRestaurants: this.addRestaurants,\n      allRestaurantsLoaded: this.allRestaurantsLoaded,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    });\n  }\n\n}","map":{"version":3,"sources":["/Users/sid/sahib/oc/restaurant-review-app/src/Components/AppContainer/index.js"],"names":["React","Map","GoogleApiWrapper","AppContainer","Container","Component","constructor","props","addRestaurants","toAddRestaurants","restaurants","state","setState","addReviews","restaurantId","reviews","allRestaurantsLoaded","google","map","placeIds","res","place_id","allPlaces","Id","i","setTimeout","request","placeId","fields","service","maps","places","PlacesService","getDetails","getInfo","results","status","render","lat","lng","console","log"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {Map, GoogleApiWrapper } from \"google-maps-react\";\nimport AppContainer from \"./AppContainer\";\n\n\nexport default class Container extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      restaurants: [],\n      reviews: []\n    }\n  }\n\n  addRestaurants = (toAddRestaurants) => {\n    const { restaurants } = this.state;\n\n    this.setState({\n      restaurants: [...restaurants, ...toAddRestaurants]\n    });\n  };\n\n  addReviews = (restaurantId, reviews) => {\n\n    this.setState({\n      reviews: [...this.state.reviews, {[restaurantId]: reviews}]\n    });\n  };\n\n  allRestaurantsLoaded = (google, map) => {\n    // SAHIB: Once all restaurants are loaded, we shall get reviews for them (call AllPlaces functinon)\n    const { restaurants } = this.state;\n    const placeIds = restaurants.map(res => {\n        return res.place_id;\n      });\n\n    this.allPlaces(google, map,placeIds);\n  }\n\n  allPlaces = (google, map, placeIds) => {\n    const addReviews = this.addReviews;\n\n    placeIds.map((Id, i) => {\n      setTimeout(() => {\n        const request = {\n          placeId: `${Id}`,\n          fields: [\"name\", \"place_id\", \"rating\", \"reviews\", \"formatted_address\"]\n        };\n        const service = new google.maps.places.PlacesService(map);\n        service.getDetails(request, getInfo);\n\n        function getInfo(results, status) {\n          if (status === \"OK\") {\n            addReviews(Id, results);\n          }\n        }\n      }, 2500);\n\n      return Id;\n    });\n  }\n\n  render() {\n    const { lat, lng } = this.props;\n    const { restaurants, reviews } = this.state;\n\n    console.log('restaurants, reviews', restaurants, reviews);\n\n    return <AppContainer\n            lat={lat}\n            lng={lng} \n            addRestaurants={this.addRestaurants}\n            allRestaurantsLoaded={this.allRestaurantsLoaded}\n      />;\n  }\n\n}\n\n"]},"metadata":{},"sourceType":"module"}